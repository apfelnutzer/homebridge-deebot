{
  "pluginAlias": "Deebot",
  "pluginType": "platform",
  "singular": true,
  "customUi": true,
  "customUiPath": "./lib/homebridge-ui",
  "headerDisplay": "<p align=\"center\"><img width=\"60%\" src=\"https://user-images.githubusercontent.com/43026681/101321841-f0eb5280-385d-11eb-8dd4-f57113f6e078.png\"></p><p align=\"center\">For help and support please visit our <a href=\"https://github.com/bwp91/homebridge-deebot/wiki\">GitHub Wiki</a>. We hope you find this plugin useful!</p>",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Plugin Name",
        "type": "string",
        "default": "Deebot"
      },
      "countryCode": {
        "title": "Country Code",
        "description": "Two-letter country code which you can find <a href=\"https://github.com/bwp91/homebridge-deebot/wiki/Country-Codes\" target=\"_blank\">here</a>.",
        "type": "string",
        "required": true
      },
      "username": {
        "title": "ECOVACS Username",
        "required": true,
        "type": "string",
        "description": "Your ECOVACS username, if your account is based in China you should use your ECOVACS ID."
      },
      "password": {
        "title": "ECOVACS Password",
        "required": true,
        "type": "string",
        "description": "Your ECOVACS password, can also be a base64 encoded version of your password."
      },
      "refreshTime": {
        "title": "Refresh Interval",
        "type": "number",
        "placeholder": 120,
        "minimum": 30,
        "description": "An interval (in seconds) in which your devices will refresh with ECOVACS. Must be 30 or more."
      },
      "disableDeviceLogging": {
        "type": "boolean",
        "title": "Disable Device Logging",
        "description": "Global logging setting for accessory status changes. If true then accessory status changes will not be logged. This can also be set per accessory later in the config."
      },
      "debug": {
        "title": "Debug Logging",
        "type": "boolean",
        "description": "Global logging setting for the plugin. If true then debug information will be added to the log. This can also be set per accessory later in the config."
      },
      "disablePlugin": {
        "title": "Disable Plugin",
        "type": "boolean",
        "description": "If true, the plugin will remove all accessories and not load the plugin on restart."
      },
      "devices": {
        "title": "Device Settings",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "deviceId": {
              "title": "Device ID",
              "type": "string",
              "description": "ECOVACS Device ID of the device these settings apply to, e.g. E2000000000000000000."
            },
            "label": {
              "title": "Label",
              "type": "string",
              "description": "This setting has no effect except to be a helpful label for identifying which device this is when editing the configuration."
            },
            "hideMotionSensor": {
              "title": "Hide Motion Sensor",
              "type": "boolean",
              "description": "If true, the motion sensor for device alerts will be hidden."
            },
            "motionDuration": {
              "title": "Alert Notification Time",
              "type": "number",
              "placeholder": 30,
              "minimum": 1,
              "description": "The length of time (in seconds) that the motion detector will be activated if your Deebot sends a message, needs help or has low battery (if enabled below). The message is viewable in the log. Must be 1 or more.",
              "condition": {
                "functionBody": "return (model.devices[arrayIndices] && !model.devices[arrayIndices].hideMotionSensor);"
              }
            },
            "lowBattThreshold": {
              "title": "Low Battery Threshold",
              "type": "number",
              "placeholder": 15,
              "minimum": 1,
              "description": "The battery percentage at which the plugin should display a low battery status. Leave blank to match the Deebot default of 15%. Must be 1 or more."
            },
            "showMotionLowBatt": {
              "title": "Low Battery Motion Sensor",
              "type": "boolean",
              "description": "If true, the motion sensor will activate when the Deebot's battery reaches the low battery threshold.",
              "condition": {
                "functionBody": "return (model.devices[arrayIndices] && !model.devices[arrayIndices].hideMotionSensor);"
              }
            },
            "showBattHumidity": {
              "title": "Show (Humidity) Battery Sensor",
              "type": "boolean",
              "description": "If true, a humidity sensor showing the battery percentage will be shown."
            },
            "overrideLogging": {
              "type": "string",
              "title": "Override Logging Setting",
              "description": "Override global logging setting for this device.",
              "oneOf": [
                {
                  "title": "Default (Use Global Setting)",
                  "enum": ["default"]
                },
                {
                  "title": "Enable Standard Logging",
                  "enum": ["standard"]
                },
                {
                  "title": "Enable Debug Logging",
                  "enum": ["debug"]
                },
                {
                  "title": "Disable All Logging",
                  "enum": ["disable"]
                }
              ]
            }
          }
        }
      },
      "ignoredDevices": {
        "title": "Ignored Devices",
        "type": "array",
        "items": {
          "type": "string",
          "title": "Device ID",
          "description": "Device ID of the device you wish to ignore, e.g. E2000000000000000000."
        }
      }
    }
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Required Settings",
      "items": ["countryCode", "username", "password"]
    },
    {
      "type": "fieldset",
      "title": "Optional Settings",
      "expandable": true,
      "items": ["refreshTime", "disableDeviceLogging", "debug", "disablePlugin"]
    },
    {
      "key": "devices",
      "title": "Device Settings",
      "expandable": true,
      "add": "Add Another Device",
      "type": "array",
      "items": [
        {
          "type": "fieldset",
          "items": [
            "devices[].deviceId",
            "devices[].label",
            "devices[].hideMotionSensor",
            "devices[].motionDuration",
            "devices[].lowBattThreshold",
            "devices[].showMotionLowBatt",
            "devices[].showBattHumidity",
            "devices[].overrideLogging"
          ]
        }
      ]
    },
    {
      "key": "ignoredDevices",
      "expandable": true,
      "title": "Ignored Devices",
      "add": "Add Another Device",
      "type": "array",
      "items": [
        {
          "type": "fieldset",
          "items": ["ignoredDevices[]"]
        }
      ]
    }
  ]
}
